From 86d6a69c329bf58f21806345af31615bbfd62412 Mon Sep 17 00:00:00 2001
From: Hongxu Jia <hongxu.jia@windriver.com>
Date: Fri, 31 Mar 2017 13:22:20 +0800
Subject: [PATCH 05/62] pyanaconda/flags.py: drop selinux module

And we do not use selinux module for wrlinux, so drop it.

The fix is to revert upstream commit
...
commit b359e1a011ca71e5431969ae4f12bb847017eaa9
Author: Chris Lumens <clumens@redhat.com>
Date:   Wed Aug 10 13:08:26 2011 -0400

    Remove as many of the /selinux path hardcodings as possible (#729563).
...

Upstream-Status: Inappropriate [wrlinux specific]

Signed-off-by: Hongxu Jia <hongxu.jia@windriver.com>
---
 pyanaconda/flags.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/pyanaconda/flags.py b/pyanaconda/flags.py
index 8a97f95..ea6c8f7 100644
--- a/pyanaconda/flags.py
+++ b/pyanaconda/flags.py
@@ -17,7 +17,7 @@
 # along with this program.  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import selinux
+import os
 import shlex
 import glob
 from pyanaconda.constants import SELINUX_DEFAULT, CMDLINE_APPEND, ANACONDA_ENVIRON
@@ -90,7 +90,7 @@ class Flags(object):
                   "nombr", "gpt"):
             self.set_cmdline_bool(f)
 
-        if not selinux.is_selinux_enabled():
+        if not os.path.exists("/selinux/load"):
             self.selinux = 0
 
 cmdline_files = ['/proc/cmdline', '/run/install/cmdline',
-- 
2.7.4

